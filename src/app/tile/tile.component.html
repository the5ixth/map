<template #popTemplate>
  <div>
    <p *ngIf="tile?.factionStrengths.sm != '0'">
      <span *ngIf="tile?.factionStrengths.sm != null">
          Samurai: 
          <span class="pull-right">
            {{ tile?.factionStrengths.sm | number }}
          </span>
      </span>
    </p>
    <p *ngIf="tile?.factionStrengths.vk != '0'">
      <span *ngIf="tile?.factionStrengths.vk != null"> 
          Viking: 
          <span class="pull-right"> 
            {{ tile?.factionStrengths.vk | number }}
          </span>
      </span>
    </p>
    <p *ngIf="tile?.factionStrengths.kn != '0'">
      <span *ngIf="tile?.factionStrengths.kn != null"> 
          Knight: 
          <span class="pull-right">
            {{ tile?.factionStrengths.kn | number }}
          </span>
      </span>
    </p>
  </div>
</template>
<div *ngIf="tile?.frontline" class="large">
  <img id='t{{tile?.id}}' src="../../assets/tiles/colored/{{ tile?.id }}.png" class="{{ tile?.owningFaction}}{{ tile?.frontline ? '-frontline' : '' }}{{ tile?.isolated ? '-isolated' : '' }}"
    [popover]="popTemplate" popoverTitle="Assets Deployed" triggers="mouseenter:mouseleave">
  <div *ngIf="( tile?.factionStrengths.vk > tile?.factionStrengths.sm || tile?.factionStrengths.sm == null ) && 
                ( tile?.factionStrengths.vk > tile?.factionStrengths.kn || tile?.factionStrengths.kn == null ) && 
                tile?.owningFaction != 'vk'">
    <img id='x{{tile?.id}}' src="../../assets/images/contested.png" class="vk-frontline" [popover]="popTemplate" popoverTitle="Assets Deployed"
      triggers="mouseenter:mouseleave">
  </div>
  <div *ngIf="( tile?.factionStrengths.kn > tile?.factionStrengths.sm || tile?.factionStrengths.sm == null ) && 
                ( tile?.factionStrengths.kn > tile?.factionStrengths.vk || tile?.factionStrengths.vk == null ) && 
                tile?.owningFaction != 'kn' ">
    <img id='x{{tile?.id}}' src="../../assets/images/contested.png" class="kn-frontline" [popover]="popTemplate" popoverTitle="Assets Deployed"
      triggers="mouseenter:mouseleave">
  </div>
  <div *ngIf="( tile?.factionStrengths.sm > tile?.factionStrengths.vk || tile?.factionStrengths.vk == null ) && 
                ( tile?.factionStrengths.sm > tile?.factionStrengths.kn || tile?.factionStrengths.kn == null)  &&
                 tile?.owningFaction != 'sm' ">
    <img id='x{{tile?.id}}' src="../../assets/images/contested.png" class="sm-frontline" [popover]="popTemplate" popoverTitle="Assets Deployed"
      triggers="mouseenter:mouseleave">
  </div>
</div>
<div *ngIf="!tile?.frontline" class="large">
  <img id='t{{tile?.id}}' src="../../assets/tiles/colored/{{ tile?.id }}.png" class=" {{ tile?.owningFaction}}{{ tile?.frontline ? '-frontline' : '' }}{{ tile?.isolated ? '-isolated' : '' }}">
</div>


<div *ngIf="tile?.frontline" class="small other">
  <img id='m{{tile?.id}}' src="../../assets/tiles/mobile_colored/{{ tile?.id }}.png" class="{{ tile?.owningFaction}}{{ tile?.frontline ? '-frontline' : '' }}{{ tile?.isolated ? '-isolated' : '' }}"
    [popover]="popTemplate" popoverTitle="Assets Deployed" triggers="mouseenter:mouseleave">
  <div *ngIf="( tile?.factionStrengths.vk > tile?.factionStrengths.sm || tile?.factionStrengths.sm == null ) && 
                ( tile?.factionStrengths.vk > tile?.factionStrengths.kn || tile?.factionStrengths.kn == null ) && 
                tile?.owningFaction != 'vk'">
    <img id='mx{{tile?.id}}' src="../../assets/images/contested.png" class="vk-frontline" [popover]="popTemplate" popoverTitle="Assets Deployed"
      triggers="mouseenter:mouseleave">
  </div>
  <div *ngIf="( tile?.factionStrengths.kn > tile?.factionStrengths.sm || tile?.factionStrengths.sm == null ) && 
                ( tile?.factionStrengths.kn > tile?.factionStrengths.vk || tile?.factionStrengths.vk == null ) && 
                tile?.owningFaction != 'kn' ">
    <img id='mx{{tile?.id}}' src="../../assets/images/contested.png" class="kn-frontline" [popover]="popTemplate" popoverTitle="Assets Deployed"
      triggers="mouseenter:mouseleave">
  </div>
  <div *ngIf="( tile?.factionStrengths.sm > tile?.factionStrengths.vk || tile?.factionStrengths.vk == null ) && 
                ( tile?.factionStrengths.sm > tile?.factionStrengths.kn || tile?.factionStrengths.kn == null)  &&
                 tile?.owningFaction != 'sm' ">
    <img id='mx{{tile?.id}}' src="../../assets/images/contested.png" class="sm-frontline" [popover]="popTemplate" popoverTitle="Assets Deployed"
      triggers="mouseenter:mouseleave">
  </div>
</div>


<div *ngIf="!tile?.frontline" class="small">
  <img id='m{{tile?.id}}' src="../../assets/tiles/mobile_colored/{{ tile?.id }}.png" class=" {{ tile?.owningFaction}}{{ tile?.frontline ? '-frontline' : '' }}{{ tile?.isolated ? '-isolated' : '' }}">
</div>